# 들어가며..

* 테스트가 중요하다
* 코드를 올바르게 테스트 하지 않았을 경우 코드 베이스가 변경 되면 
현재 또는 미래에 코드가 작동 하는지 여부를 알 수 없다.
* 테스트를 실시 하면 특정 기능이 중단된 경우 해당 기능을 알 수 있다.
* 테스트를 통해 코드 디버깅이 훨씬 시워져 시간과 비용이 절감 된다.
* 테스트 코드를 작성하며 코드에 대한 자신감이 높아 지므로 고용주에 대한 신뢰를 받을수 있다.
* 보험 증권 이다.

# 장고 테스트의 소개
### 테스트의 유형
두 가지 주요한 테스트 유형에는 **단위** 및 **통합** 이 있다.
* 단위 테스트는 하나의 기능만을 테스트하는 격리된 테스트다.
* 통합 테스트는 사용자 동작및 응용 프로그램 전체에 대해 중점을 두는 큰 테스트다. 서로 다른 코드 기능을 결합하여 올바르게 작동하는지에 대한 테스트.
* 단위 테스트를 많이 써라. 통합 테스트에 비해 작성 및 디버깅이 쉬우며 빠르다.
* 통합 테스트가 코드의 회귀를 파악하는데 도움이 될 수 있으므르 통합 테스트가 필요한 경우도 있다.
* 일반적으로 테스트 결과는 성공/실패/오류 가 된다.
* 예상 결과를 테스트할 뿐만 아니라 예상치 못한 결과를 코드가 얼마나 잘 처리하는지를 테스트 해야 한다.

### 모범 사례
1. 코드가 부서질 수 있으므로 테스트를 해야 한다. 여기는 모델, 뷰, 폼, 템플릿, 유효성 검사(validators)등이 포함된다.
2. 각 테스트는 일반적으로 하나의 기능만을 테스트 해야 한다.
3. 단순하게 유지하며 테스트하라. 다른 테스트위에 테스트를 작성 하는것은 좋지 않다.
4. 프로덕션 환경으로 푸시하기 전에 준비 환경에서 `PULL`, 또는 `PUSH` 될때마다 테스트 해야 한다. 
5. 장고의 새버전으로 업그레이드 할 경우
    * 로컬에서 업데이트하고
    * 테스트를 수행한다
    * 버그를 고친후
    * 저장소에 `PUSH` 한다음
    * 코드를 보내기전 준비 단계에서 다시 테스트 해야 한다.
    
### 구조
프로젝트에 맞게 구성 한다. 각 앱의 `test.py`에 있는 모든 테스트를 수행하고 `Model, View, Form`등과 같이 그룹화 하는 경향도 있다.
물론 각앱에 `test.py`를 삭제 하고 `tests`를 패키징 하여 테스트를 구성 할 수도 있다.

```python
└── app_name
    └── tests
        ├── __init__.py
        ├── test_forms.py
        ├── test_models.py
        └── test_views.py
```
마지막으로 프로젝트의 전체 구조를 반영하는 별도의 테스트 폴더를 만들어 각 `app`폴더에다가 `tests.py`를 만들어 쓸 수도 있다.

큰 프로젝트의 경우 두개의 후자 구조로 만드는 것이 좋은데, 추천하는 것은 세번째로 하나의 스크립트에서 모든 응용 프로그램을 볼 수 있을때 각 응용 프로그램에 대한 테스트를
설계 하는 것이 더 쉽기 때문이다.

### 서드 파티 패키지
테스트를 작성하는 실행하는데 도움이 되는 패키지 및 라이브러리를 사용 하라.
* [django-webtest](https://pypi.org/project/django-webtest/): 최종 사용자의 입장에서 테스트하는것이 쉬워진다. 셀레니움과 결합하여 템플릿과 뷰를 완벽하게 테스트 할 수 있다.
* [coverage](http://nedbatchelder.com/code/coverage/): 테스트의 유효성을 측정하는데 사용 되 테스트로 커버된 코드베이스의 백분율을 보여 준다.
* [django-discover-runner](https://github.com/jezdez-archive/django-discover-runner): 테스트를 `test.py`외부에 작성하거나 별도의 폴에 테스트를 구성하면 해당 패키지를 사용하여 찾을 수 있다.
* [factory_boy](https://github.com/FactoryBoy/factory_boy), [model_mommy](https://github.com/vandersonmota/model_mommy), [mock](https://pypi.org/project/mock/): 
모두 테스트를 위해 데이터를 채우기 위한 `Fixtures` 또는 `ORM`대신 사용된다. 느려질 수 있으며 모델이 변경 될 때마다 업데이트 해야 한다. 